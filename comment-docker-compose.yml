version: "3.8"

services:
  # Container 1: file excel số 1
  comment_crawler_excel1:
    image: comment_crawler:latest

    build:
      context: .
      dockerfile: comment-Dockerfile
    environment:
      - PAGE_NAME=nguyenvandai
      - INPUT_EXCEL=/app/database/post/page/nguyenvandai/ACC_nguyenvandai/nguyenvandai.xlsx
      - COOKIE_PATH=/app/database/facebookaccount/authen_tranhoangdinhnam/cookies.json
      - DATA_ROOT=/app/database
      - HEADLESS=true
    volumes:
      - ./comment:/app/comment
      - ./util:/app/util
      - ./logs:/app/logs
      - ./database:/app/database
    shm_size: 1gb
    restart: unless-stopped

  # Container 2: file excel số 2
  comment_crawler_excel2:
    image: comment_crawler:latest     # <-- dùng lại image đã build
    environment:
      - PAGE_NAME=nguyenvandai0906
      - INPUT_EXCEL=/app/database/post/page/nguyenvandai0906/ACC_nguyenvandai0906/nguyenvandai0906.xlsx
      - COOKIE_PATH=/app/database/facebookaccount/authen_tranhoangdinhnam/cookies.json
      - DATA_ROOT=/app/database
      - HEADLESS=true
    volumes:
      - ./comment:/app/comment
      - ./util:/app/util
      - ./logs:/app/logs
      - ./database:/app/database
    shm_size: 1gb
    restart: unless-stopped
